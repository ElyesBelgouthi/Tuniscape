<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>alreadyAdded</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.4.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+Knujsl7/1L_dstPt3HV5HzF6Gvk/e3E1wPGZF5_M8ydObm" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="calender/cal.css" />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
    <link rel="stylesheet" href="{{ asset('assets/css/styles.css'      ) }}" >
    <link rel="stylesheet" href="{{ asset('assets/css/styles2.css'      ) }}" >
    <link rel="stylesheet" href="{{ asset('assets/css/style.css'      ) }}" >
</head>

<body>
<header>
    <div class="logo">
        <img src="img/logo2.png" />
    </div>
    <nav class="nav">
        <ul class="nav__list">
            <li class="nav__item"><a href="index.html" class="nav__link">Home</a></li>
            <li class="nav__item">
                <a href="#services" class="nav__link">Services</a>
            </li>
            <li class="nav__item">
                <a href="#about" class="nav__link">About us</a>
            </li>
            <li class="nav__item">
                <a href="login.html"><button class="login--btn btn">LOGIN</button></a>
            </li>
        </ul>
    </nav>
</header>

<main>
    <div class="bg">

        <section id="cart">
            <h1 class="section__title section__title--intro animate__animated animate__fadeInLeft">
                <strong>Cart</strong>
            </h1>
        </section>
        <div class="category-block2">
            <div class="text-container sectionTitle">
                <p>Here is an overview of your reservation, you can edit it, choose a date and comfirm!</p>
            </div>
            <div id="flight-datepicker">
                <div><label>Depart on</label><input class="input-sm form-control" type="date" id="start-date" name="start" placeholder="Select depart date" data-date-format="DD, MM d" /></div>
                <div><label>Return on</label><input class="input-sm form-control" type="date" id="end-date" name="end" placeholder="Select return date" data-date-format="DD, MM d" /><span class="date-text date-return"></span></div>
            </div>
            <button class="login--btn btn largebtn">NEXT</button>
        </div>
        <div class="category-block">
            <h3 class="section-title sectionTitle">Your accommodation :</h3>
            <div class="scrollable">

                {% for card in acards %}
                    <div class="card">
                        <button type="button" class="close remove-btn" data-type="accommodation" data-id="{{ card.id }}" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <img class="img-card" src="{{ asset('assets/img/hotels/leRoyal.jpg'  ) }}" width="100%" height="100%" alt="Card image">
                        <div class="textBox">
                            <h3>{{ card.name }}</h3>
                            <p>{{ card.description }}</p>
                            <a href="{{ path('accommodation_show', {'id': card.id}) }}" class="login--btn btn">More</a>
                        </div>
                    </div>
                {% endfor %}

            </div>
        </div>


        <div class="category-block">
            <h3 class="section-title sectionTitle">You chose to eat :</h3>
            <div class="scrollable">

                {% for card in fcards %}
                    <div class="card">
                        <button type="button" class="close remove-btn" data-type="food" data-id="{{ card.id }}" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <img class="img-card" src="{{ asset('assets/img/hotels/leRoyal.jpg'  ) }}" width="100%" height="100%" alt="Card image">
                        <div class="textBox">
                            <h3>{{ card.name }}</h3>
                            <p>{{ card.description }}</p>
                            <a href="{{ path('food_show', {'id': card.id}) }}" class="login--btn btn">More</a>
                        </div>
                    </div>
                {% endfor %}
                <button class="scroll-button left-button">&lt;</button>
                <button class="scroll-button right-button">&gt;</button>
            </div>
        </div>


        <div class="category-block">
            <h3 class="section-title sectionTitle">You chose to visit:</h3>
            <div class="scrollable">
                {% for card in vcards %}
                    <div class="card">
                        <button type="button" class="close remove-btn" data-type="activity" data-id="{{ card.id }}" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <img class="img-card" src="{{ asset('assets/img/hotels/leRoyal.jpg'  ) }}" width="100%" height="100%" alt="Card image">
                        <div class="textBox">
                            <h3>{{ card.name }}</h3>
                            <p>{{ card.description }}</p>
                            <a href="{{ path('activity_show', {'id': card.id}) }}" class="login--btn btn">More</a>
                        </div>
                    </div>
                {% endfor %}
                <button class="scroll-button left-button">&lt;</button>
                <button class="scroll-button right-button">&gt;</button>
            </div>
        </div>
    </div>



</main>

<footer>
    <!-- Your website footer here -->
</footer>

<!-- Add any necessary JavaScript here -->
<script src="cart.js"></script>
</body>
{% block javascripts %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const removeButtons = document.querySelectorAll('.remove-btn');

            async function removeItemFromCart(event) {
                const button = event.target.closest('.remove-btn');
                const itemId = button.getAttribute('data-id');
                const itemType = button.getAttribute('data-type');
                console.log(itemId)
                console.log(itemType)

                const response = await fetch('{{ path('cart_remove') }}', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `type=${itemType}&id=${itemId}`,
                });

                if (response.ok) {
                    // Remove the item from the DOM or update the page without reloading it, e.g., display a success message
                    button.closest('.card').remove();
                } else {
                    // Handle errors, e.g., display an error message
                }
            }

            removeButtons.forEach(function(button) {
                button.addEventListener('click', removeItemFromCart);
            });
        });
    </script>
{% endblock %}



</html>